<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feed</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../styles/style.css">
    <script src="../scripts/script.js"></script>
    <script>
        function addURL() {
            var x = document.getElementById("link").value;
            var y = document.getElementById("title").value;
            var vid = document.createElement('iframe');
            vid.width = "420px";
            vid.height = "345px";
            vid.id = getUsername();
            vid.setAttribute("src", x);
            vid.setAttribute('title', y);
            let bool = isURL(x);
            if (!bool) {
                alert("Please enter a valid embedable url");
            }
            else {
                var p = document.createElement("p");
                vid.appendChild(document.createElement("br"));
                p.appendChild(vid);
                p.appendChild(document.createElement("br"));
                var h = document.createElement("text");
                var t = document.createTextNode(getUsername() + ": " + y);
                h.appendChild(t);
                h.append(document.createElement("br"));
                h.append(document.createElement("br"));
                p.appendChild(h);
                var body = document.getElementById("body");
                body.insertBefore(p, body.firstChild);
                document.getElementById("link").value = "";
                document.getElementById("title").value = "";
            }
        }
        function isURL(str) {
            var pattern = new RegExp('^(https?:\\/\\/)?' + // protocol
                '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|' + // domain name
                '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR ip (v4) address
                '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path
                '(\\?[;&a-z\\d%_.~+=-]*)?' + // query string
                '(\\#[-a-z\\d_]*)?$', 'i'); // fragment locator
            return pattern.test(str);
        }
    </script>
    <script>
        var d = document.getElementsByTagName("iframe");
        var x = document.getElementsByTagName("text");
        for (var i = 0; i < d.length; i++)
            x[i].innerHTML = d[i].id + ": " + d[i].title;
    </script>
</head>
<body onpageshow="settingsInputUserInfo();">
    <div class="navbar">
        <a class="navbar-brand text-primary font-weight-bold" href="/">SchoolShare</a>
        <a href="/feed" class="navbar-text p-2 mx-1 text-white">Feed</a>
        <a href="/createRoom" class="navbar-text p-2 mx-1 text-white">Create Room </a>
        <a href="/joinRoom" class="navbar-text p-2 mx-1 text-white">Join Room </a>
        <a href="/about" class="navbar-text p-2 mx-1 text-white">About </a>
        <a href="/contact" class="navbar-text p-2 mx-1 text-white mr-auto"> Contact Us</a>
        <a href="/browser" class="navbar-text p-2 mx-1 text-white mr-auto"> Browser</a>
		<a href="/settings" class="navbar-text p-2 mx-1 text-white ml-auto" id="settings"> Settings</a>
        <a href="/logout" class="btn btn-align-middle btn-primary mr-1" type="button" id="logout" aria-haspopup="true"
            aria-expanded="false"> Logout
        </a>
    </div>
    <div class="main">
       <br><br> 
            URL to embed: <input type="text" id="link" value=""><br><br>
            Description for Video: <input type="text" id="title" value=""><br><br>
            <button onclick="addURL()">Embed Video</button>

            <!-- the videos uploaded or whetever -->
            <!-- would be the vidos from wherver they are stored, maybe by chronilogical order? -->

            <!-- id is the username of the person, title is the title of the post-->

           <!-- <p> <iframe width="420" height="345" id="uName" src="" title=""></iframe></p> -->
            <p><iframe width="420" height="345" src="https://www.youtube.com/embed/YaLLLHugwHw?controls=1" id="Susan Roth" title="Dissappear">
        </iframe><br>
            <text></text><br><br></p>
            <p><iframe width="420" height="345" src="https://www.youtube.com/embed/kRDVXnACx7Y?controls=1" id="John Smith" title="The Edge">
        </iframe><br>
            <text></text><br><br></p>
            <iframe width="420" height="345" src="https://www.youtube.com/embed/daV3T2biCfA?controls=1" id="Mary Jain" title="Steve Rogers">
        </iframe><br>
            <text></text><br><br></p>
            <p><iframe width="420" height="345" src="https://www.youtube.com/embed/wmvXOLpwqeo?controls=1" id="James Doe" title="Nah Sir">
        </iframe><br>
            <text></text><br><br></p>
    </div>
     
</body>
</html>