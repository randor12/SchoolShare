<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feed</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../styles/style.css">
    <script src="../scripts/script.js"></script>
</head>
<body onpageshow="settingsInputUserInfo();">
    <div class="navbar">
        <a class="navbar-brand text-primary font-weight-bold" href="/">SchoolShare</a>
        <a href="/feed" class="navbar-text p-2 mx-1 text-white">Feed</a>
        <a href="/createRoom" class="navbar-text p-2 mx-1 text-white">Create Room </a>
        <a href="/joinRoom" class="navbar-text p-2 mx-1 text-white">Join Room </a>
        <a href="/about" class="navbar-text p-2 mx-1 text-white">About </a>
        <a href="/contact" class="navbar-text p-2 mx-1 text-white mr-auto"> Contact Us</a>
        <a href="/browser" class="navbar-text p-2 mx-1 text-white mr-auto"> Browser</a>
		<a href="/settings" class="navbar-text p-2 mx-1 text-white ml-auto" id="settings"> Settings</a>
        <a href="/logout" class="btn btn-align-middle btn-primary mr-1" type="button" id="logout" aria-haspopup="true"
            aria-expanded="false"> Logout
        </a>
        <h2>  <type="text" id="user" onload="getUsers().uName;" required> </h2>
    </div>
    <div class="main">
        <div class="main">
        <form>
            <label for="feed">URL to Embed:</label>
            <input type="url" id="feed" name="url"><br><br>
       </form> 
       <form>
            <label for="feed">Description for Video:</label>
            <input type="text" id="feed" name="title"><br><br>
            <button onclick="addToPage()">Submit</button> 
       </form> 
        
        <script>
        function addToPage(){
            var vid = <iframe width="420" height="345" id="uName"/>;
            var d = document.getElementsByTagName("p")[0];
            var p = <p></p>
            var link = document.getElementsByName("feed").value;
            var description = document.getElementsByName("title").value;
            if(!isUrl(link))
            	alert("Please enter a valid embedable url");
            else{
            	vid.setAttribute('src', link);
            	vid.setAttribute('title', link);
            	p.appendChild(vid);
            	var body = document.getElementById("body");
            	p.prependTo(body);
            }
        }
        </script>
        <script>
        function isURL(str) {
            var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
            '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|'+ // domain name
            '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
            '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
            '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
            '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
        return pattern.test(str);
        }
        </script>


    </div>
    <div id="body">

            <!-- the videos uploaded or whetever -->
            <!-- would be the vidos from wherver they are stored, maybe by chronilogical order? -->

            <!-- id is the username of the person, title is the title of the post-->
            <p><iframe width="420" height="345" src="https://www.youtube.com/embed/YaLLLHugwHw?controls=1" id="Susan Roth" title="Dissappear">
        </iframe><br>
            <text></text><br><br></p>
            <p><iframe width="420" height="345" src="https://www.youtube.com/embed/kRDVXnACx7Y?controls=1" id="John Smith" title="The Edge">
        </iframe><br>
            <text></text><br><br></p>
            <iframe width="420" height="345" src="https://www.youtube.com/embed/daV3T2biCfA?controls=1" id="Mary Jain" title="Steve Rogers">
        </iframe><br>
            <text></text><br><br></p>
            <p><iframe width="420" height="345" src="https://www.youtube.com/embed/wmvXOLpwqeo?controls=1" id="James Doe" title="Nah Sir">
        </iframe><br>
            <text></text><br><br></p>
    </div>
     <script>
            var d = document.getElementsByTagName("iframe");
            var x = document.getElementsByTagName("text");
            for (var i = 0; i < d.length; i++)
                x[i].innerHTML = d[i].id + ": " + d[i].title;
    </script>
</body>
</html>